global !p
def complete(t, opts):
	if t:
		opts = [m[len(t):] for m in opts if m.startswith(t)]
	if len(opts) == 1:
		return opts[0]
	elif len(opts) == 0:
		return ""
	return '|'.join(opts)
endglobal

snippet tikznode "Tikz state node" b
\node[state, $1`!p snip.rv=complete(t[1],['none','initial','accepting'])` $2`!p snip.rv=complete(t[1], ['left','right','top','bottom'])` of=$3] (${4:name}) {${5:label}};
endsnippet


